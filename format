#!/bin/bash
usage()
{
  echo "Usage: $0 dir"
  echo "dir - Project directory"
  exit 1
}
if [ "$#" -ne 1 ] || ! [ -d "$1" ]; 
then
  usage
fi
declare -r classpathFile="gformat.cp"
declare -r mainClass="com.google.googlejavaformat.java.Main"

if [ ! -e $classpathFile ]
  then
    echo "$classpathFile cannot be found. Run ant in root directory to generate file."
    usage
fi

java -cp @$classpathFile $mainClass \
  --set-exit-if-changed -i \
`find $1 -type f -name "*.java"`
exit $?
