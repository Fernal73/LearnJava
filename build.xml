<?xml version="1.0"?>
<project xmlns:ivy="antlib:org.apache.ivy.ant" name="LearnJava" default="main" basedir=".">
  <dirname property="LearnJava.basedir" file="${ant.file.LearnJava}"/>
  <property file="${LearnJava.basedir}/globalbuild.properties"/>
  <property file="${LearnJava.basedir}/checkstyle.properties"/>
  <property file="${LearnJava.basedir}/gformat.properties"/>
  <!-- Sets variables which can later be used. -->
  <!-- The value of a property is accessed via ${} -->
  <property name="lib.dir" value="${LearnJava.basedir}/lib"/>
  <path id="lib.path.id">
    <fileset dir="${lib.dir}"/>
  </path>
  <target name="resolve" description="--&gt; retreive dependencies with ivy">
    <first id="ivyfile">
      <fileset dir="${LearnJava.basedir}" includes="ivy.xml"/>
    </first>
    <ivy:resolve file="${toString:ivyfile}"/>
    <ivy:retrieve  pathid="cs.main.path" conf="checkstyle.main"/>
    <ivy:retrieve  pathid="gformat.main.path" conf="gformat.main"/>
    <ivy:retrieve  pathid="cs.lib.path" conf="checkstyle.lib"/>
    <ivy:retrieve  pathid="gformat.lib.path" conf="gformat.lib"/>
  </target>
  <!-- =================================
          target: report
         ================================= -->
  <target name="report" depends="resolve" description="--&gt; generates a report of dependencies">
    <ivy:report todir="."/>
  </target>
  <target name="main" depends="resolve">
    <description>Main target</description>
  </target>
  <!-- =================================
          target: clean-cache
         ================================= -->
  <target name="clean-cache" description="--&gt; clean the ivy cache">
    <ivy:cleancache/>
  </target>
</project>
